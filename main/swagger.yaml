basePath: /api
consumes:
- application/json
- application/x-www-form-urlencoded
definitions:
  ChangeLog:
    description: ChangeLog defines the structure for an API config-log
    properties:
      AgentInfo:
        description: the Agent Info for the change log entry
        maxLength: 20
        type: string
      CommitHash:
        description: the Commit Hash for the change log entry
        maxLength: 100
        type: string
        uniqueItems: true
      ConfigEntryID:
        description: the id for the change log entry - auto genrated
        format: uint64
        minimum: 1
        pattern: '[0-9]+'
        type: integer
        uniqueItems: true
        x-go-name: ID
      CreatedAt:
        description: the Creation Date for the change log entry - auto genrated
        format: date-time
        type: string
        uniqueItems: true
      EnvironmentName:
        description: the Environment Name for the change log entry
        maxLength: 10
        type: string
      Message:
        description: the Message for the change log entry
        maxLength: 255
        type: string
      ReleaseInfo:
        description: the Release Info for the change log entry
        maxLength: 30
        type: string
      ServiceName:
        description: the Service Name for the change log entry
        maxLength: 20
        type: string
      ServiceTeamName:
        description: the Service Team Name for the change log entry
        maxLength: 20
        type: string
      TypeOfChange:
        description: the TypeOfChange for the change log entry
        maxLength: 20
        type: string
      UpdatedAt:
        description: the Modification Date for the change log entry - auto genrated
        format: date-time
        type: string
      Username:
        description: the Username for the change log entry (Execution user)
        maxLength: 20
        type: string
    required:
    - ServiceTeamName
    - ServiceName
    - Username
    - EnvironmentName
    - CommitHash
    - ReleaseInfo
    - TypeOfChange
    - AgentInfo
    - Message
    type: object
    x-go-package: github.com/nitinda/microservice-change-log/api/models
  GenericError:
    description: GenericError is a Generic error message returned by a server
    properties:
      message:
        type: string
        x-go-name: Message
    type: object
    x-go-package: github.com/nitinda/microservice-change-log/api/docs
host: ops-changelog-api.tuiuki.io
info:
  contact:
    email: uki-cloud-platforms@tui.co.uk
    name: Cloud Platform Team
  description: |-
    the purpose of this application is to provide an application
    that will be used to record config chanegs applied to services.
  license:
    name: MIT
    url: http://opensource.org/licenses/MIT
  termsOfService: there are no TOS at this moment.
  title: |-
    Changelog API
    Documentation
  version: "1.0"
paths:
  /api/changelog:
    post:
      consumes:
      - application/json
      description: Create new config log entry
      operationId: createChangeLog
      parameters:
      - in: body
        name: Body
        schema:
          properties:
            AgentInfo:
              description: the Agent Info for the change log entry
              example: jenkins | gitlab
              maxLength: 20
              type: string
            CommitHash:
              description: the Commit Hash for the change log entry
              maxLength: 100
              type: string
              uniqueItems: true
            EnvironmentName:
              description: the Environment Name for the change log entry
              example: dev | test | prod
              maxLength: 10
              type: string
            Message:
              description: the Message for the change log entry
              example: This is dummy release
              maxLength: 255
              type: string
            ReleaseInfo:
              description: the Release Info for the change log entry
              example: Release number 1.2.3
              maxLength: 30
              type: string
            ServiceName:
              description: the Service Name for the change log entry
              example: tomcat
              maxLength: 20
              type: string
            ServiceTeamName:
              description: the Service Team Name for the change log entry
              example: sales
              maxLength: 20
              type: string
            TypeOfChange:
              description: the TypeOfChange for the change log entry
              example: config or release
              maxLength: 10
              type: string
            Username:
              description: the Username for the change log entry (Execution user)
              example: John Wick
              maxLength: 20
              type: string
          required:
          - ServiceTeamName
          - ServiceName
          - Username
          - EnvironmentName
          - CommitHash
          - ReleaseInfo
          - TypeOfChange
          - AgentInfo
          - Message
          type: object
      produces:
      - application/json
      responses:
        "200":
          $ref: '#/responses/changelogResponse'
        "500":
          $ref: '#/responses/changelogErrorResponse'
      schemes:
      - http
      security:
      - Bearer: []
      tags:
      - changelog
  /token:
    post:
      consumes:
      - application/x-www-form-urlencoded
      description: Create new session token entry
      operationId: createSessionToken
      parameters:
      - description: |-
          The Authorization to generate new session token
          aBase64EncodeFunction(ApigeeKey:ApigeeSecret), Note the colon separating the two values.
        example: Basic VG1iQ3NNaGZyVXJHCVKHNd3FZMzasHekZGUlRFT046TWMIZXCVNQAPk5xJSbQ==
        in: header
        name: Authorization
        required: true
        type: string
        uniqueItems: true
      - default: application/x-www-form-urlencoded
        description: Content Type for request header
        in: header
        name: Content-Type
        required: true
        type: string
        x-go-name: ContentType
      - description: the Authorization to generate new session token
        in: body
        name: Body
        schema:
          properties:
            grant_type:
              default: client_credentials
              description: The grant type for api authentication
              type: string
              x-go-name: GrantType
          required:
          - grant_type
          type: object
      produces:
      - application/json
      responses:
        "200":
          $ref: '#/responses/createSessionTokenResponse'
        "403":
          $ref: '#/responses/createSessionTokenErrorResponse'
      schemes:
      - http
      security:
      - OAuth2: []
      tags:
      - changelog
produces:
- application/json
responses:
  changelogErrorResponse:
    description: Generic error message returned as a string
    schema:
      properties:
        unauthorized:
          example: Token is expired or signature is invalid
          type: string
          x-go-name: Message
      type: object
  changelogResponse:
    description: Data structure representing a single changelog
    schema:
      $ref: '#/definitions/ChangeLog'
  createSessionTokenErrorResponse:
    description: A ValidationError is an error that is used when the required input fails validation.
    schema:
      properties:
        fault:
          properties:
            detail:
              properties:
                errorcode:
                  example: oauth.v2.InvalidClientIdentifier
                  type: string
                  x-go-name: ErrorCodeMessage
              type: object
              x-go-name: DetailMessage
            faultstring:
              example: Invalid client identifier {0}
              type: string
              x-go-name: FaultStringMessage
          type: object
          x-go-name: FaultMessage
      type: object
  createSessionTokenResponse:
    description: Data structure representing create session token api response
    schema:
      properties:
        access_token:
          example: Usf5LTdStGxER1GgHdGIj31VfPVmdNH
          type: string
          x-go-name: AccessToken
        client_id:
          example: sdasdzoizcxhviuhIUIudsakfj
          type: string
          x-go-name: CliendID
        expires_in:
          example: 3599
          format: int64
          type: integer
          x-go-name: ExpiresIn
        issued_at:
          description: 'Exmple: 1607600275154'
          format: int64
          type: integer
          x-go-name: IssuedAt
        refresh_count:
          description: 'Exmaple: 0'
          format: int64
          type: integer
          x-go-name: RefeshCount
        scope:
          type: string
          x-go-name: Scope
        token_type:
          example: Bearer
          type: string
          x-go-name: TokenType
      type: object
  genericError:
    description: Generic error message returned as a string
    schema:
      $ref: '#/definitions/GenericError'
schemes:
- http
security:
- OAuth2: []
- Bearer: []
securityDefinitions:
  Bearer:
    in: header
    name: Authorization
    type: apiKey
  OAuth2:
    description: This API uses OAuth 2 with the Client Credntials grant flow.
    flow: application
    in: header
    tokenUrl: https://prod.api.tui/oauth2/token
    type: oauth2
swagger: "2.0"
